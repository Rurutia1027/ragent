{
  "name": "pdf-ingestion-pipeline",
  "description": "PDF文档摄取流水线 - 解析、AI增强、分块、向量化",
  "nodes": [
    {
      "nodeId": "fetcher-1",
      "nodeType": "FETCHER",
      "nextNodeId": "parser-1"
    },
    {
      "nodeId": "parser-1",
      "nodeType": "PARSER",
      "settings": {
        "rules": [
          {
            "mimeType": "PDF"
          }
        ]
      },
      "nextNodeId": "enhancer-1"
    },
    {
      "nodeId": "enhancer-1",
      "nodeType": "ENHANCER",
      "settings": {
        "modelId": "qwen-plus",
        "tasks": [
          {
            "type": "CONTEXT_ENHANCE",
            "systemPrompt": "你是文档整理专家。请严格按照以下要求整理文档：\n1. 修复格式错误（表格错位、段落混乱、编号错误）\n2. 保持原文所有信息完整，不删减内容\n3. 保持专业术语准确性\n4. 只输出整理后的文档正文，不要添加任何说明、解释、前言、分隔线或总结\n5. 直接从文档第一个字开始输出",
            "userPromptTemplate": "请整理以下PDF文档内容：\n\n{{text}}"
          }
        ]
      },
      "nextNodeId": "chunker-1"
    },
    {
      "nodeId": "chunker-1",
      "nodeType": "CHUNKER",
      "settings": {
        "strategy": "FIXED_SIZE",
        "chunkSize": 512,
        "overlapSize": 128
      },
      "nextNodeId": "indexer-1"
    },
    {
      "nodeId": "indexer-1",
      "nodeType": "INDEXER",
      "settings": {
        "embeddingModel": "qwen-emb-8b",
        "includeEnhancedContent": true,
        "metadataFields": [
          "category",
          "department"
        ]
      }
    }
  ]
}
