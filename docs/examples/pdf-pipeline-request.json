{
  "name": "pdf-ingestion-pipeline",
  "description": "PDF文档摄取流水线 - 解析、AI增强、分块、向量化",
  "nodes": [
    {
      "nodeId": "fetcher-1",
      "nodeType": "FETCHER",
      "nextNodeId": "parser-1"
    },
    {
      "nodeId": "parser-1",
      "nodeType": "PARSER",
      "settings": {
        "rules": [
          {
            "mimeType": "PDF"
          }
        ]
      },
      "nextNodeId": "enhancer-1"
    },
    {
      "nodeId": "enhancer-1",
      "nodeType": "ENHANCER",
      "settings": {
        "modelId": "qwen-max",
        "tasks": [
          {
            "type": "CONTEXT_ENHANCE",
            "systemPrompt": "你是文档整理专家。请对以下可能存在格式问题的文档内容进行整理：\n1. 修复明显的格式错误（表格错位、段落混乱）\n2. 保持原文核心信息完整\n3. 保持专业术语准确性\n4. 直接输出整理后的文本，不要添加任何解释",
            "userPromptTemplate": "请整理以下PDF文档内容：\n\n{text}"
          }
        ]
      },
      "nextNodeId": "chunker-1"
    },
    {
      "nodeId": "chunker-1",
      "nodeType": "CHUNKER",
      "settings": {
        "strategy": "FIXED_SIZE",
        "chunkSize": 512,
        "overlapSize": 128
      },
      "nextNodeId": "indexer-1"
    },
    {
      "nodeId": "indexer-1",
      "nodeType": "INDEXER",
      "settings": {
        "collectionName": "pdf_documents",
        "embeddingModel": "text-embedding-v3",
        "includeEnhancedContent": true,
        "metadataFields": [
          "category",
          "department"
        ]
      }
    }
  ]
}
